#!/usr/bin/env node

const path = require('path');
const semver = require('semver');
const fs = require('fs');
const logger = require('../lib/logger')('release rewrite');

const {name, version} = require(path.resolve('package.json'));

if (!semver.prerelease(version)) {
	const packageName = `${name}-${version}.tgz`;
	const packagePath = path.join(process.cwd(), packageName);

	if (fs.existsSync(packagePath)) {
		logger.error(`package '${packageName}' already exists`);
		process.exit(-1);
	}
}
